"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var loadScript=function(e,t){var n=e.match(/[a-z_-]+/gi),a=null;if(!n)throw new Error("Incorrect URL: "+e);a=n.join("-");var i=document.getElementById(a);if(!i){var r=document.createElement("script");r.src=e,r.id=a,document.body.appendChild(r),r.onload=function(){t&&t()},r.onerror=function(){throw new Error("Connection failed: "+e)}}i&&t&&t()},EnferlaztTime=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n={analog:[1,2,3],digital:[4]},a=e.getAttribute("type"),i=e.getAttribute("variation")||1;if(!n[a]||!n[a].includes(+i))throw new Error('Incorrect type "'+a+'" or variation "'+i+'"!');switch(a){case"analog":e.createType.analog.call(e,i);break;case"digital":e.createType.digital.call(e,i)}return(e.getAttribute("title")||"true"==e.getAttribute("map"))&&e._getCaption({titleText:e.getAttribute("title"),fullLocation:e.getAttribute("location")}),e}return _inherits(t,HTMLElement),_createClass(t,[{key:"_getCaption",value:function(e){var t,n=e.titleText,a=e.fullLocation,i=n||(t=(t=(t=a.match(/[^\/][a-z_]+$/gi))[0].replace(/_/g," "))[0].toUpperCase()+t.substring(1)),r=document.createElement("p");r.className="enferlazt-caption",r.innerHTML=i,this.appendChild(r),a&&this._getMap(r,a)}},{key:"_getMap",value:function(e,t){var n=document.createElement("iframe");n.className="enferlazt-iframe",n.src="https://maps.google.com/maps?&width=170&amp;&height=170&amp;&hl=en&amp;&q="+t+"&amp;&ie=UTF8&amp;&t=&amp;&z=3&amp;&iwloc=B&amp;&output=embed",this.appendChild(n),e.addEventListener("click",function(){return n.style.display="none"==getComputedStyle(n).display?"block":"none"})}},{key:"createType",get:function(){return{analog:function(e){var t=document.createElement("img");t.className="enferlazt-background",t.src="img/enferlazt-clockType-"+e+".png",this.appendChild(t),this.createNesting.analog.call(this,{classTitle:"hours",srcImage:"img/enferlazt-hourType-"+e+".png"}),this.createNesting.analog.call(this,{classTitle:"minutes",srcImage:"img/enferlazt-minType-"+e+".png"}),this.createNesting.analog.call(this,{classTitle:"seconds",srcImage:"img/enferlazt-secType-"+e+".png"}),this.nextStep.analog.call(this),setInterval(this.nextStep.analog.bind(this),1e3)},digital:function(e){var t=document.createElement("img");t.className="enferlazt-background",t.src="img/enferlazt-clockType-"+e+".png",this.appendChild(t);var n=document.createElement("div");n.className="enferlazt-digital",this.appendChild(n),this.createNesting.digital.call(n,{classTitle:"hours"}),this.createNesting.digital.call(n,{classTitle:"delimiter"}),n.children[1].innerHTML=":",this.createNesting.digital.call(n,{classTitle:"minutes"}),this.createNesting.digital.call(n,{classTitle:"seconds"}),this.nextStep.digital.call(this,n),setInterval(this.nextStep.digital.bind(this,n),1e3)}}}},{key:"createNesting",get:function(){return{analog:function(e){var t=e.classTitle,n=e.srcImage,a=document.createElement("div");a.className="enferlazt-"+t,this.appendChild(a);var i=document.createElement("img");i.className="enferlazt-"+t+"-img",i.src=n,a.appendChild(i)},digital:function(e){var t=e.classTitle,n=document.createElement("span");n.className="enferlazt-"+t,this.appendChild(n)}}}},{key:"nextStep",get:function(){return{analog:function(){var e=moment().tz(this.getAttribute("location")),t=6*e.format("ss"),n=6*(+e.format("mm")+1/60*e.format("ss")),a=30*(+e.format("HH")+1/60*e.format("mm")),i=this.children[3].children[0];this.children[3].replaceChild(i,this.children[3].children[0]),this.children[1].style.webkitTransform="rotateZ("+a+"deg)",this.children[2].style.webkitTransform="rotateZ("+n+"deg)",this.children[3].style.webkitTransform="rotateZ("+t+"deg)",this.children[1].style.transform="rotateZ("+a+"deg)",this.children[2].style.transform="rotateZ("+n+"deg)",this.children[3].style.transform="rotateZ("+t+"deg)"},digital:function(e){var t=moment().tz(this.getAttribute("location"));e.children[0].innerHTML=t.format("HH"),e.children[2].innerHTML=t.format("mm"),e.children[3].innerHTML=t.format("ss")}}}}],[{key:"observedAttributes",get:function(){return["location","type","variation","map","title"]}}]),t}();loadScript("http://momentjs.com/downloads/moment.js",function(){loadScript("http://momentjs.com/downloads/moment-timezone-with-data.js",function(){customElements.define("enferlazt-clock",EnferlaztTime)})});